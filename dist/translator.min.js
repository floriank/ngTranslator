!function(a){"use strict";a.module("ngTranslator",[]).directive("translate",["translateProcessor",function(a){return{restrict:"AC",link:function(b,c,d){var e,f,g;f=c[0].innerText,void 0===f?(e="textContent",f=c[0][e]):e="innerText",g=null!=d.translateLang?d.translateLang:null,a.process(f,g,b,function(a){c[0][e]=a})}}}]).directive("translateAttribute",["translateProcessor",function(a){return{restrict:"AC",link:function(b,c,d){var e,f,g;e=d.translateAttribute,f=d[e],g=null!=d.translateLang?d.translateLang:null,a.process(f,g,b,function(a){c[0].setAttribute(e,a)})}}}]).directive("translatePlaceholder",["translateProcessor",function(a){return{restrict:"AC",link:function(b,c,d){var e,f;e=d.translatePlaceholder,f=null!=d.translateLang?d.translateLang:null,a.process(e,f,b,function(a){c[0].setAttribute("placeholder",a)})}}}]).directive("translateValue",["translateProcessor",function(a){return{restrict:"AC",link:function(b,c,d){var e,f;e=d.translateValue,f=null!=d.translateLang?d.translateLang:null,a.process(e,f,b,function(a){c[0].setAttribute("value",a)})}}}]).service("translateProcessor",["$interpolate","translator","translateConfig",function(a,b,c){this.process=function(d,e,f,g){b.translate(d,e).then(function(b){var e,h,i,j,k,l,m;switch(j=/{{([^}]+)}}/g,typeof b){case"string":h=a(b),k=b.match(j);break;case"object":if(b.constructor!==Object)return void g(c.getConfigError().replace("@@",d));if(null==b.defaultTranslation)return void g(c.getDefaultError().replace("@@",d));h=a(b.defaultTranslation),k=b.defaultTranslation.match(j);break;default:return void g(c.getConfigError().replace("@@",d))}if(k)for(l=0,m=k.length;m>l;l++)return i=k[l],e=i.slice(2,+(i.length-3)+1||9e9),void f.$watch(e,function(c){"object"==typeof b&&(h=a(null!=b[c]?b[c]:b.defaultTranslation)),g(h(f))});g(h(f))},function(a){g(a)})}}]).service("translator",["$q","translateConfig","translateData",function(a,b,c){this.translate=function(d,e){var f;return f=a.defer(),e=null===e?b.getLanguage():e,c.getTranslation(e).then(function(a){(null==d||null==a[d])&&f.reject(b.getKeyError().replace("@@",d)),f.resolve(a[d])},function(a){f.reject(b.getLangError().replace("@@",a))}),f.promise}}]).provider("translateConfig",[function(){this.defaultLanguage="en",this.languageError='Not translation for language "@@"',this.keyError='No translation for key "@@"',this.badConfigError='Missconfigured translation for key "@@"',this.defaultMissingError='No default translation configured for "@@"',this.$get=function(){var a,b,c,d,e;return d=this.defaultLanguage,e=this.languageError,c=this.keyError,b=this.defaultMissingError,a=this.badConfigError,{getLanguage:function(){return d},getLangError:function(){return e},getKeyError:function(){return c},getDefaultError:function(){return b},getConfigError:function(){return a}}},this.setLanguage=function(a){this.defaultLanguage=a},this.setLanguageError=function(a){this.languageError=a},this.setKeyError=function(a){this.keyError=a},this.setBadConfigError=function(a){this.badConfigError=a},this.setDefaultMissingError=function(a){this.defaultMissingError=a}}]).factory("translateData",["$q",function(a){var b;return b=a.defer(),{setTranslations:function(a){var c,d,e;e={};for(c in a)d=a[c],e[c]=d;b.resolve(e)},getTranslation:function(c){var d;return d=a.defer(),b.promise.then(function(a){(null==c||null==a[c])&&d.reject(c),d.resolve(a[c])}),d.promise}}}])}(angular);